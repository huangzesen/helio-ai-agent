# Bug Fix Plan — 15 Issues from 2026-02-07 Test Session

## Context

Testing on 2026-02-07 ran 81 commands across 8 missions and found 15 issues, including 2 critical JVM crashes. This plan fixes all 15 issues in 3 batches ordered by impact and complexity. Full issue details: `tests/issue-log-20260207/ISSUE_SUMMARY.md`.

---

## BATCH 1: Quick Wins (4 issues, ~5 files)

### ISSUE-05 + ISSUE-11: Resolve relative paths to absolute
### ISSUE-07: Render type snake_case to Java camelCase mapping
### ISSUE-10: Fix DOM title API documentation in prompt
### ISSUE-12: Guard color table against non-spectrogram render types

## BATCH 2: Medium Fixes (4 issues, ~4 files)

### ISSUE-03: Ensure DatetimeIndex in custom_operation
### ISSUE-02: Catch Java exceptions in plot_cdaweb + validate parameter
### ISSUE-04: Better to_qdataset vector error + prompt guidance
### ISSUE-01: Enforce 3-panel maximum

## BATCH 3: Knowledge & Prompt Updates (7 issues, JSON + prompt files)

### ISSUE-06: MMS @0/@1 dataset naming
### ISSUE-08: Reduce unnecessary clarification
### ISSUE-09: Track stored labels after delegation
### ISSUE-13: Add STEREO-A STA_L2_MAG_RTN to recommended
### ISSUE-14: Wind high-cadence data warning
### ISSUE-15: Document Autoplot waitUntilIdle race condition

## Files Modified (summary)

| File | Issues |
|------|--------|
| `autoplot_bridge/commands.py` | 05, 07, 12, 02, 01 |
| `knowledge/prompt_builder.py` | 10, 04, 01, 08, 09 |
| `autoplot_bridge/script_runner.py` | 04, 01 |
| `agent/core.py` | 02 |
| `data_ops/custom_ops.py` | 03 |
| `knowledge/missions/mms.json` | 06 |
| `knowledge/missions/wind.json` | 14 |
| `knowledge/missions/stereo_a.json` | 13 |
| `docs/known-issues.md` | 15 |

## Implementation Status

**Note (2026-02-08):** Most issues in Batch 1 and Batch 2 referenced `autoplot_bridge/` files (commands.py, script_runner.py) which have been deleted — the entire Autoplot/JVM bridge was replaced by the Plotly renderer. Issues related to JVM crashes (ISSUE-15), Java camelCase (ISSUE-07), color tables (ISSUE-12), DOM title API (ISSUE-10) are no longer applicable. Knowledge/prompt issues in Batch 3 (ISSUE-06, 08, 09, 13, 14) were addressed during the refactor. See `docs/known-issues.md` for the resolved issues list.

- [x] Plan saved
- [x] Superseded by Autoplot removal (Batch 1 + 2 issues no longer applicable)
- [x] Batch 3 addressed during refactor
- [ ] End-to-end verification
